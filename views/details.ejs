<!-- views/details.ejs -->
<!DOCTYPE html>
<html>
<head>
  <title>URL Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      /* background-color: #f9f9f9; */
      /* padding: 2rem; */
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
    }
    h2 {
      margin-bottom: 1rem;
      color: #2c3e50;
    }
    p {
      margin: 0.5rem 0;
    }
    .qr-img {
      margin-top: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .btn-back {
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Details for Short ID: <%= data.shortId %></h2>

    <p><strong>Original URL:</strong> <%= data.redirectUrl %></p>
    <p><strong>Short URL:</strong>
      <a href="/api/url/<%= data.shortId %>" target="_blank">
        /api/url/<%= data.shortId %>
      </a>
    </p>

    <p><strong>QR Code:</strong></p>
    <img src="<%= data.qrCode %>" width="200" class="qr-img" alt="QR Code" />

    <h3 class="mt-4">Visit History:</h3>
    <ul class="list-group">
      <% if (data.visitHistory.length === 0) { %>
        <li class="list-group-item text-muted">No visits yet.</li>
      <% } else { %>
        <% data.visitHistory.forEach((visit, idx) => { %>
          <li class="list-group-item">
            #<%= idx + 1 %> - <%= new Date(visit.timestamp).toLocaleString() %>
          </li>
        <% }) %>
      <% } %>
    </ul>

    <!-- âœ… Analytics button -->
    <a href="/api/url/analytics/<%= data.shortID %>" class="btn btn-primary btn-sm mt-3">View Full Analytics</a>

    <br>

    <!-- Back button -->
    <a href="/api/url/getAllUrl" class="btn btn-secondary btn-sm btn-back">Back to All URLs</a>
  </div>

  <!-- Vanta.js and dependencies -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      VANTA.NET({
        el: "body",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        color: 0xff3f81,
        backgroundColor: 0x23153c,
        points: 10,
        maxDistance: 20,
        spacing: 15,
        showDots: true
      });
    });
  </script>
</body>
</html>
