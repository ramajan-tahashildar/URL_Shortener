<!DOCTYPE html>
<html>
<head>
  <title>All URLs</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body, html {
      background: #23153c !important;
      /* background-image: url("https://images.unsplash.com/photo-1522202222200-4781f4f6bbf6"); */
      /* background-size: cover; */
      /* background-repeat: no-repeat; */
      min-height: 100vh;
      position: relative;
    }
    .overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      /* background: rgba(112, 141, 196, 0.7); */
      z-index: 0;
    }
    .main-content {
      position: relative;
      z-index: 1;
    }
    .card {
      background-color: rgba(255, 255, 255, 0.97);
      border-radius: 18px;
      box-shadow: 0 8px 24px rgba(30,60,114,0.15);
    }
    .qr-code {
      width: 80px;
      border-radius: 8px;
      border: 1px solid #eee;
      background: #f8f9fa;
      padding: 4px;
    }
    .header-img {
      width: 80px;
      height: 80px;
      object-fit: contain;
      margin-bottom: 10px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    .table th, .table td {
      vertical-align: middle;
    }
    .table thead {
      background: #1e3c72;
      color: #fff;
    }
    .btn-info {
      background: #d2e2ff;
      border: none;
    }
    .btn-info:hover {
      background: #db5d5d;
    }
    .btn-success {
      background: #28a745;
      border: none;
    }
    .btn-success:hover {
      background: #218838;
    }
  </style>
</head>
<body>
  <!-- Vanta.js and dependencies -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      VANTA.NET({
        el: "body",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        color: 0xff3f81,
        backgroundColor: 0x23153c,
        points: 10,
        maxDistance: 20,
        spacing: 15,
        showDots: true
      });
    });
  </script>
  <div class="container py-5 main-content">
    <div class="card p-4 shadow">
      <div class="text-center mb-4">
        <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" alt="URL Shortener" class="header-img" />
        <h3 class="mb-1">All Shortened URLs</h3>
        <p class="text-muted">Manage and track your shortened links easily.</p>
      </div>
      <div class="table-responsive">
        <table class="table table-bordered table-striped align-middle">
          <thead>
            <tr>
              <th>Short ID</th>
              <th>Original URL</th>
              <th>QR Code</th>
              <th>Created</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% urls.forEach(url => { %>
              <tr>
                <td><span class="badge bg-primary"><%= url.shortId %></span></td>
                <td style="max-width: 220px; word-break: break-all;"><a href="<%= url.redirectUrl %>" target="_blank"><%= url.redirectUrl %></a></td>
                <td><img src="<%= url.qrCode %>" class="qr-code" /></td>
                <td><%= new Date(url.createdAt || url._id.getTimestamp()).toLocaleString() %></td>
                <td>
                  <a href="/api/url/analytics/<%= url.shortId %>" class="btn btn-sm btn-info">Analytics</a>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
      <div class="text-center mt-4">
        <a href="/" class="btn btn-success">Go Back</a>
      </div>
    </div>
  </div>
</body>
</html>
